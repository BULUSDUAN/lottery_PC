@using MatchBiz.Core;
@using app.lottery.site.Models;
@using GameBiz.Core;
@{
    string type = ViewBag.Type;
    ViewBag.Title = SiteConvert.GameName("jclq", type) + " - 开奖信息 - 体育彩票 | 福利彩票 | 中国体育彩票 - " + SiteString.getHZSiteName(Request);
    ViewBag.keywords = SiteConvert.GameName("jclq", type) + ", 开奖信息, 体育彩票, 福利彩票, 中国体育彩票, " + SiteString.getHZSiteName(Request);
    ViewBag.Description = SiteConvert.GameName("jclq", type) + "开奖频道为您提供实时的竞彩足球比赛结果,各玩法赛果开奖详情,查询竞彩足球开奖结果就上" + SiteString.getHZSiteName(Request);

    CurrentUserInfo user = ViewBag.CurrentUser;
    var match = ViewBag.Match as JCLQMatchResult_Collection;
    var queryDate = (DateTime)ViewBag.Begin;
    var isDefault = (bool)ViewBag.IsDefault;
    @UserHelper.css("newlottery.css")
    @UserHelper.js_share("/My97DatePicker/WdatePicker.js")
}
<div id="jclq">
    <div class="jczq_lottery_notic">
        <span class="icon_game jclq jc_jczq"></span>
        <div class="jczq_top">
            <div class="jczq_title">
                @(SiteConvert.GameName("jclq", type))开奖信息</div>
            <div class="jczq_lottery_search">
                赛果查询：
                @ControlHelper.Calendar("begin", ViewBag.Begin)
                <input type="button" value="查 询" id="btn-query" class="btn2" />
                <input type="hidden" id="gameType" value="@type" />
            </div>
        </div>
        <div class="jczq_top_r">
            <div>
                开奖时间：<span style="color: #fd3d00;">每日开奖</span></div>
            <div style="color: #fd3d00;">
                注：竞彩开奖比赛日期选择，指比赛的实际开赛时间</div>
        </div>
        <div class="clear">
        </div>
    </div>
    <div class="mymenu">
        <ul>
            <li class="@(string.IsNullOrEmpty(type) ? "myons" : string.Empty)"><a href="@(isDefault ? "/statichtml/lottery/jclq/detail_jclq_all.html" : string.Format("/statichtml/lottery/jclq/{0}/detail_jclq_all_{1}.html", queryDate.ToString("yyyyMM"), queryDate.ToString("yyyyMMdd")))">
                单关奖金</a></li>
            <li class="@(type == "sf" ? "myons" : string.Empty)"><a href="@(isDefault ? "/statichtml/lottery/jclq/detail_jclq_sf.html" : string.Format("/statichtml/lottery/jclq/{0}/detail_jclq_sf_{1}.html", queryDate.ToString("yyyyMM"), queryDate.ToString("yyyyMMdd")))" >
                胜负</a></li>
            <li class="@(type == "rfsf" ? "myons" : string.Empty)"><a href="@(isDefault ? "/statichtml/lottery/jclq/detail_jclq_rfsf.html" : string.Format("/statichtml/lottery/jclq/{0}/detail_jclq_rfsf_{1}.html", queryDate.ToString("yyyyMM"), queryDate.ToString("yyyyMMdd")))"  >
                让分胜负</a></li>
            <li class="@(type == "sfc" ? "myons" : string.Empty)"><a href="@(isDefault ? "/statichtml/lottery/jclq/detail_jclq_sfc.html" : string.Format("/statichtml/lottery/jclq/{0}/detail_jclq_sfc_{1}.html", queryDate.ToString("yyyyMM"), queryDate.ToString("yyyyMMdd")))"  >
                胜分差</a></li>
            <li class="@(type == "dxf" ? "myons" : string.Empty)"><a href="@(isDefault ? "/statichtml/lottery/jclq/detail_jclq_dxf.html" : string.Format("/statichtml/lottery/jclq/{0}/detail_jclq_dxf_{1}.html", queryDate.ToString("yyyyMM"), queryDate.ToString("yyyyMMdd")))"  >
                大小分</a></li>
        </ul>
        <div class="clear">
        </div>
    </div>
    <div class="jczq_tab">
        <table cellspacing="0" cellpadding="0">
            @{if (string.IsNullOrEmpty(type))
              {
                <tr class="top_tr" height="30">
                    <td style="width: 7%">
                        场次
                    </td>
                    <td style="width: 7%">
                        赛事
                    </td>
                    <td style="width: 7%">
                        比赛时间
                    </td>
                    <td style="width: 11%">
                        客队
                    </td>
                    <td style="width: 8%">
                        比分
                    </td>
                    <td style="width: 11%">
                        主队
                    </td>
                    <td style="width: 9%">
                        胜负
                    </td>
                    <td style="width: 7%">
                        让分盘口
                    </td>
                    <td style="width: 8%">
                        让分胜负
                    </td>
                    <td style="width: 9%">
                        胜分差
                    </td>
                    <td style="width: 7%">
                        总分盘口
                    </td>
                    <td style="width: 8%">
                        大小分
                    </td>
                </tr>
                  foreach (var item in match.MatchResultList)
                  {
                      var date = item.StartTime.ToString("yyMMdd");
                <tr id="row_@(item.MatchIdName)" class="@(match.MatchResultList.IndexOf(item) % 2 == 0 ? "ni" : "ni2")">
                    <td>@item.MatchIdName
                    </td>
                    <td style="color: #FFFFFF; background-color: #@(string.IsNullOrEmpty(item.LeagueColor) ? "ff6d00" : item.LeagueColor);">@item.LeagueName
                    </td>
                    <td>@item.StartTime.ToString("MM-dd HH:mm")
                    </td>
                    <td style="text-align: right">@item.GuestTeamName
                    </td>
                    @{if (item.MatchState == "2")
                      {
                        <td style="color: red">
                            <b>@(item.GuestTeamScore)-@(item.HomeTeamScore)</b>
                        </td>
                        <td style="text-align: left">@item.HomeTeamName
                        </td>
                        <td>
                            <span style="color: #f00;">@( item.SF_Result == "-1" ? " 无开售" : SiteString.ANTECODES_NAME("sf", item.SF_Result))</span>
                            <br>@item.SF_SP
                        </td>
                        <td style="text-align: right" bgcolor="#f0f0d0">
                            <b>@(item.RFSF_SP > 0 ? "+" : string.Empty)
                                @item.RFSF_SP.ToString("f")</b>
                        </td>
                        <td>
                            <span style="color: #f00;">@(SiteString.ANTECODES_NAME("rfsf", item.RFSF_Result))</span><br>
                            @item.RFSF_SP
                        </td>
                        <td>
                            <span style="color: #f00;">@(SiteString.ANTECODES_NAME("sfc", item.SFC_Result))</span><br>
                            @item.SFC_SP
                        </td>
                        <td style="text-align: right" bgcolor="#f0f0d0">
                            <b>@*@zf.ToString("f")*@ @(item.DXF_SP > 0 ? "+" : string.Empty)
                                @item.DXF_SP.ToString("f")</b>
                        </td>
                        <td>
                            <span style="color: #f00;">@SiteString.ANTECODES_NAME("dxf", item.DXF_Result)</span><br>
                            @item.DXF_SP
                        </td>
                      }
                      else if (item.MatchState == "3")
                      {
                        <td class="red">
                            取消
                        </td>
                        <td style="text-align: left">@item.HomeTeamName
                        </td>
                        <td>
                        </td>
                        <td class="red">
                            取消
                        </td>
                        <td class="red">
                            取消
                        </td>
                        <td class="red">
                            取消
                        </td>
                        <td class="red">
                            取消
                        </td>  
                        <td>
                        </td>                     
                      }
                      else if (item.MatchState == "4")
                      {
                        <td class="red">
                            推迟
                        </td>
                        <td style="text-align: left">@item.HomeTeamName
                        </td>
                        <td>
                        </td>
                        <td>
                        </td>
                        <td>
                        </td>
                        <td>
                        </td>
                        <td>
                        </td> 
                        <td>
                        </td>                 
                      }
                      else
                      {
                        <td>
                        </td>
                        <td style="text-align: left">@item.HomeTeamName
                        </td>
                        <td>
                        </td>
                        <td>
                        </td>
                        <td>
                        </td>
                        <td>
                        </td>
                        <td>
                        </td> 
                        <td>
                        </td> 
                      }
                    }
                </tr>
                  }
              }
              else
              {
                <tr class="top_tr" height="30">
                    <td style="width: 12%">
                        比赛时间
                    </td>
                    <td style="width: 7%">
                        场次
                    </td>
                    <td style="width: 8%;">
                        赛事
                    </td>
                    <td style="width: 14%;">
                        客队
                    </td>
                    <td style="width: 9%;">
                        比分
                    </td>
                    <td style="width: 14%;">
                        主队
                    </td>
                    <td style="width: 5%;" @(type == "rfsf" ? string.Empty : "class=hide")>
                        让分
                    </td>
                    <td style="width: 5%;" @(type == "dxf" ? string.Empty : "class=hide")>
                        总分
                    </td>
                    <td style="width: 10%;">
                        彩果
                    </td>
                    <td style="width: 10%;">
                        开奖奖金
                    </td>
                </tr>
                  foreach (var item in match.MatchResultList)
                  {
                      var date = item.StartTime.ToString("yyMMdd");

                      var cg = item.SF_Result;
                      var sp = item.SF_SP;
                      if (type == "rfsf")
                      {
                          cg = item.RFSF_Result;
                          sp = item.RFSF_SP;
                      }
                      else if (type == "sfc")
                      {
                          cg = item.SFC_Result;
                          sp = item.SFC_SP;
                      }
                      else if (type == "dxf")
                      {
                          cg = item.DXF_Result;
                          sp = item.DXF_SP;
                      }
                <tr id="row_@(item.MatchId)" class="@(match.MatchResultList.IndexOf(item) % 2 == 0 ? "ni" : "ni2")">
                    <td>@item.StartTime.ToString("MM-dd HH:mm")
                    </td>
                    <td>@item.MatchIdName
                    </td>
                    <td style="color: #FFFFFF; background-color: #@(string.IsNullOrEmpty(item.LeagueColor) ? "ff6d00" : item.LeagueColor);">@item.LeagueName
                    </td>
                    <td style="text-align: right">@item.GuestTeamName
                    </td>
                    @{if (string.IsNullOrEmpty(item.MatchState) || item.MatchState == "2")
                      {
                        <td style="color: red">
                            <b>@(item.GuestTeamScore)-@(item.HomeTeamScore)</b>
                        </td>
                        <td style="text-align: left">@item.HomeTeamName
                        </td>
                        <td @(type == "rfsf" ? string.Empty : "class=hide")>
                            <b>@(item.RFSF_SP > 0 ? "+" : string.Empty)
                                @item.RFSF_SP.ToString("f")</b>
                        </td>
                        <td @(type == "dxf" ? string.Empty : "class=hide")>
                            <b>@item.DXF_SP.ToString("f")</b>
                        </td>
                        <td style="padding-left: 5px;">
                            @{if (!string.IsNullOrEmpty(cg))
                              {<span class="spitems">@(cg == "-1" ? "无开售" : SiteString.ANTECODES_NAME(type, cg))</span> }}
                        </td>
                      }
                      else if (item.MatchState == "3")
                      {
                        <td class="red">
                            取消
                        </td>
                        <td>@item.HomeTeamName
                        </td>
                        <td @(type == "rfsf" ? string.Empty : "class=hide")>
                            <b>@(item.RFSF_SP > 0 ? "+" : string.Empty)@item.RFSF_SP.ToString("f")</b>
                        </td>
                        <td @(type == "dxf" ? string.Empty : "class=hide")>
                            <b>@item.DXF_SP.ToString("f")</b>
                        </td>
                        <td>
                        </td>                     
                      }
                      else if (item.MatchState == "4")
                      {
                        <td class="red">
                            推迟
                        </td>
                        <td>@item.HomeTeamName
                        </td>
                        <td @(type == "rfsf" ? string.Empty : "class=hide")>
                            <b>@(item.RFSF_SP > 0 ? "+" : string.Empty)@item.RFSF_SP.ToString("f")</b>
                        </td>
                        <td @(type == "dxf" ? string.Empty : "class=hide")>
                            <b>@item.DXF_SP.ToString("f")</b>
                        </td>
                        <td>
                        </td>                      
                      }
                      else
                      {
                        <td>
                        </td>
                        <td>@item.HomeTeamName
                        </td>
                        <td @(type == "rfsf" ? string.Empty : "class=hide")>
                            <b>@(item.RFSF_SP > 0 ? "+" : string.Empty)@item.RFSF_SP.ToString("f")</b>
                        </td>
                        <td @(type == "dxf" ? string.Empty : "class=hide")>
                            <b>@item.DXF_SP.ToString("f")</b>
                        </td>
                        <td>
                        </td>
                      }
                    }
                    <td style="color: Red; padding-right: 35px; text-align: right;">@sp
                    </td>
                </tr>
                  }
              }}
        </table>
    </div>
</div>
<div class="clear">
</div>
<script type="text/javascript">
    $("#btn-query").click(function () {
        var begin = $("#begin").val();
        var d = new Date(begin);
        var year = d.getFullYear();
        var month = (d.getMonth() + 1) < 10 ? "0" + (d.getMonth() + 1) : (d.getMonth() + 1);
        var day = d.getDate() < 10 ? "0" + d.getDate() : d.getDate();
        var gameType = $("#gameType").val();
        if (!gameType)
            gameType = "all";
        var url = "/statichtml/lottery/jclq/" + year + month + "/detail_jclq_" + gameType + "_" + year + month + day + ".html"
        location.href = url;

    })
</script>
