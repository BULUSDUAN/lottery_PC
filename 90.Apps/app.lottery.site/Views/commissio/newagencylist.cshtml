@using External.Core;
@using app.lottery.site.Models
@{
    ViewBag.Title = "店铺代理, 用户中心, 体育彩票, 福利彩票, 中国体育彩票, " + SiteString.getHZSiteName(Request);
    ViewBag.keywords = "店铺代理, 用户中心, 体育彩票, 福利彩票, 中国体育彩票, " + SiteString.getHZSiteName(Request);
    var list = ViewBag.GeneralizeUser as External.Core.Agnet.AgentUserInfoCollection;
    CurrentUserInfo currentUser = ViewBag.CurrentUser;
    var storemessage = ViewBag.StoreMessage as External.Core.Agnet.StoreMessageInfoCollection;
}
@section css{
    @UserHelper.css("mycenter.css")
    @UserHelper.css("commissio.css")
}
<div id="bet_confirm_show" style="height: auto">
</div>
<div id="fullbg">
</div>
<div class="crumb">
    <ul>
        <li class="a">您当前的位置：</li>
        <li><a href="/">首页</a> > </li>
        <li>店铺代理</li>
    </ul>
</div>
<div class="center mt10">
    @{Html.RenderAction("menu", "Member");}
    <div class="new_buy_right">
        @{Html.RenderAction("toptip", "Member");}
        <div class="mycommenu">
            <a href="javascript:void(0);" checklg="/commissio/myTc">我的提成</a>
            @if (currentUser.LoginInfo.OCAgentType == GameBiz.Core.OCAgentCategory.SportLotterySubAgent)
            {
                <a href="javascript:void(0);" checklg="/commissio/subordinateuser" class="up">推广用户</a> 
            }
            else
            {
                <a href="javascript:void(0);" checklg="/commissio/generalizeUser" class="up">推广用户</a> 
            }
            <a href="javascript:void(0);" checklg="/commissio/CommissionRecord">返点结算</a> <a href="javascript:void(0);"
                checklg="/commissio/StatisticsQuery">统计查询</a> <a href="javascript:void(0);" checklg="/commissio/SchemeManage">
                    方案管理</a>
        </div>
        <div class="scheme">
            @if (currentUser.LoginInfo.OCAgentType != GameBiz.Core.OCAgentCategory.SportLotterySubAgent)
            {
                <div class="scheme-show" style="margin-left: 10px;">
                    <a href="javascript:void(0)" checklg="/commissio/generalizeUser">下级代理</a>
                </div>
            }
            <div class="scheme-show">
                <a href="javascript:void(0)" checklg="/commissio/subordinateuser">下级用户</a>
            </div>
            @if (currentUser.LoginInfo.OCAgentType != GameBiz.Core.OCAgentCategory.SportLotterySubAgent)
            {
                <div class="scheme-show">
                    <a href="javascript:void(0)" checklg="/commissio/dealerMsg">添加代理</a>
                </div>
            }
            <div class="scheme-show" style="width: 130px;">
                <a href="javascript:void(0)" checklg="/commissio/setNewUserRebate">设置新用户返点</a>
            </div>
            <div class="scheme-show">
                <a href="javascript:void(0)" checklg="/commissio/popularizeLink">推广链接</a>
            </div>
            @if (currentUser.LoginInfo.OCAgentType == GameBiz.Core.OCAgentCategory.SportLotteryAgent)
            {
                <div class="scheme-show">
                    <a href="javascript:void(0)" checklg="/commissio/registernewagency">注册新代理</a>
                </div>
                <div class="scheme-show xzscheme">
                    <a href="javascript:void(0)" checklg="/commissio/newagencylist">店铺代理</a>
                </div>
            }
        </div>
        <table border="0" cellpadding="0" cellspacing="0" class="storeagent">
            <tr class="newtr1" style="background-color: #ddd;">
                <td style="width: 15%">
                    用户编号
                </td>
                <td style="width: 20%">
                    用户名
                </td>
                <td style="width: 10%">
                    店面编号
                </td>
                <td style="width: 35%">
                    推广地址
                </td>
            </tr>
            @if (storemessage != null)
            {
                foreach (var item in storemessage.ToList())
                {
                <tr class="newtr1">
                    <td style="width: 15%">
                        @item.UserId
                    </td>
                    <td style="width: 20%">
                        @item.UserName
                    </td>
                    <td style="width: 10%">
                        @item.StoreId
                    </td>
                    <td style="width: 35%">
                        @item.CustomerDomain
                    </td>
                </tr>
                }
            }
            <tr style="border-bottom: none;">
                <td colspan="14">
                    @ViewHelpers.Pager4("getUserRebate", ViewBag.pageNo, ViewBag.pageSize, storemessage == null ? 0 : storemessage.Count)
                </td>
            </tr>
        </table>
    </div>
    <script type="text/javascript">
        $(function () {
            $(".generalizeUser-table tr:odd:gt(0)").css("backgroundColor", "#f7f7f7");
        })
        var getUserRebate = function (pageNo, pageSize) {
            location.search = "pageNo=" + pageNo + "&pageSize" + pageSize;
        };
    </script>
</div>
<div class="clearfix">
</div>
