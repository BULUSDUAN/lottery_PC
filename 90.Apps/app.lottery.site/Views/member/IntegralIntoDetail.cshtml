@using System.Activities.Statements
@using app.lottery.site.Models
@using GameBiz.Core
@{    
    Layout = "../Shared/_LayoutFoud.cshtml";
    ViewBag.Title = "转入记录";
    var user = ViewBag.CurrentUser as CurrentUserInfo;
    var fund = ViewBag.Fund as UserFundDetailCollection;
    var account = ViewBag.Account;
    var payType = ViewBag.PayTypeList;
}

<div class="center mt10">
    @{Html.RenderAction("menuFoud", "Member");}
     @{Html.RenderAction("toptipFoud", "Member");}
    <div class="new_buy_center">
        <div class="betorder_top clearfix">
            <ul>
                <li ><a href="/member/integraldetail">返点明细</a></li>
                <li><a href="/member/integralextract">返点提取</a></li>
                <li><a  href="/member/drawingsrecordfoud">提取记录</a></li>
                <li><a  href="/member/integralinto">返点转入</a></li>
                 <li class="betorder_topSelected"><a href="/member/integralintodetail">转入记录</a></li>
                 <li><a  href="/member/jf">我的返点</a></li>
            </ul>
        </div>
        <div class="betorder_con clearfix">
            <div class="chebox_tab">
                @*订单号：<input type="text" class="orderId" id="orderId"/>*@
         @*       &nbsp;&nbsp;转入状态：<select>
                                     <option>1</option>
                                 </select>*@
           @* <input type="checkbox" name="payType" value="10" id="jfsr" /><label for="jfsr">返点收入</label>&nbsp;&nbsp;
            <input type="checkbox" name="payType" value="20" id="jftq" /><label for="jftq">返点支出</label>&nbsp;&nbsp;
            <input type="checkbox" name="accountType" value="20" id="dj" /><label for="dj">提取冻结</label>&nbsp;&nbsp;*@
            &nbsp;&nbsp;&nbsp;&nbsp; 日期：@ViewHelpers.Calendar3("begin", ViewBag.Begin)至 @ViewHelpers.Calendar3("end", ViewBag.End)
            <input type="button" onclick="getFundRecord(0,10)" value="查询" />
        </div>
            <table class="betorder_table" border="0" cellspacing="0" cellpadding="0">
                <thead>
                    <tr class="tr_head">
                        <th width="100">
                            序号
                        </th>
                        <th width="150">
                            交易时间
                        </th>
                        <th width="180">
                            交易前返点
                        </th>
                        <th width="120">
                            转入返点
                        </th>
                        <th width="180">
                            交易后返点
                        </th>
                       
                        <th width="">
                            订单号
                        </th>
                    </tr>
                </thead>
             @if (fund != null && fund.FundDetailList.Count > 0)
             {
                 foreach (var item in fund.FundDetailList)
                 {
                     <tr>
                         <td>
                             @(ViewBag.PageIndex*ViewBag.PageSize+ fund.FundDetailList.IndexOf(item) + 1)
                         </td>
                         <td>
                             @item.CreateTime.ToString("yyyy-MM-dd HH:mm:ss")
                         </td>
                         
                         <td class="green">
                             @item.BeforeBalance.ToString("N2")
                         </td>
                         <td class="sr">
                             @item.PayMoney.ToString("N2")
                         </td>
                         <td class="ye">
                             @item.AfterBalance.ToString("N2")
                         </td>
                        
                         <td class="orderId">@item.OrderId</td>
                     </tr>
                 }

             }
                <tr>
                    <td colspan="6" class="betorder_number_money">
                    @*    <p>
                            <b class="srjy"></b>收入交易：@(fund != null ? fund.TotalPayinCount : 0)
                        笔 &nbsp;&nbsp;&nbsp;&nbsp; <b class="srje"></b>收入返点：@(fund != null ? fund.TotalPayinMoney.ToString("N2") : "0")
                        &nbsp;&nbsp;&nbsp;&nbsp; <b class="zcjy"></b>支出交易：@(fund != null ? fund.TotalPayoutCount : 0)
                        笔&nbsp;&nbsp;&nbsp;&nbsp; <b class="zcje"></b>支出返点：@(fund != null ? fund.TotalPayoutMoney.ToString("N2") : "0")
                        
                        </p>*@
                        <p class="tip">注意：转入记录最多可查询一个月数据</p>
                    </td>
                </tr>
            </table>
             @ViewHelpers.Pager6("getFundRecord", ViewBag.PageIndex, ViewBag.PageSize, fund == null ? 0 : (fund.TotalPayinCount + fund.TotalPayoutCount))
        </div>
    </div>
</div>

<script type="text/javascript">
    function getFundRecord(pageNo, pageSize) {
        var begin = $("#begin").val();
        var end = $("#end").val();
        location.search = "pageindex=" + pageNo + "&pagesize=" + pageSize + "&begin=" + begin + "&end=" + end + "&r=" + Math.random().toFixed(5);
    }
</script>