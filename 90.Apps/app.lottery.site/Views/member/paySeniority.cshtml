@using External.Core.Agnet
@{    
    Layout = "../Shared/_LayoutFoud.cshtml";
    ViewBag.Title = "充值排行";
    ViewBag.keywords = "充值排行";
    var list = ViewBag.AgentFillMoney as AgentFillMoneyTopCollection;
}

<div class="center mt10">
    @{Html.RenderPartial("Mycommenu", "Member");}
    @{Html.RenderPartial("toptipFoud", "Member");}
    <div class="new_buy_right">
        <div class="betorder_top">
            <ul>
                <li><a href="/member/generalizeUser">返点用户</a></li>
                <li> <a href="/member/CommissionRecord">返点结算</a></li>
                <li class="betorder_topSelected"><a href="/member/StatisticsQuery">统计查询</a></li>
                <li> <a href="/member/SchemeManage" >方案管理</a></li>
            </ul>
        </div>
        <div class="betorder_con clearfix">
            <div class="scheme">
                <div class="scheme-show">
                    <a href="/member/StatisticsQuery">用户购彩</a>
                </div>
                <div class="scheme-show xzscheme">
                    <a href="/member/PaySeniority"><i></i>充值排行</a>
                </div>
                <div class="scheme-show">
                    <a href="/member/agentsales">推广销量</a>
                </div>
            </div>
            <div class="scheme-titile">
                <span class="dot"></span>
                <label class="lbfa">充值排行</label>
            </div>
            <div class="tab_box">
                <div style="width: 620px !important 540px; float: left; height: 40px; line-height: 40px;">
                    &nbsp;&nbsp;&nbsp;&nbsp;用户名：<input type="text" class="orderId" name="txtKey" id="txtKey" />
                    &nbsp;&nbsp;日期：@ViewHelpers.Calendar3("begin", ViewBag.Begin)至 @ViewHelpers.Calendar3("end", ViewBag.End)
                    &nbsp;<input class="search_btn" type="button" value="查询" onclick="getAgentFillMoney(0,10)"></div>
          
                <table border="0" cellpadding="0" cellspacing="0" class="betorder_table">
                    <tr class="tr_head">
                        <th width="122">
                            用户编号
                        </th>
                        <th width="122">
                            用户名
                        </th>
                        <th width="129">
                            充值笔数
                        </th>
                        <th width="115">
                            充值总金额
                        </th>
                    </tr>
                    @if (list != null && list.AgentFillMoneyTopList.Count > 0)
                    {
                        foreach (var item in list.AgentFillMoneyTopList)
                        {
                            <tr>
                                <td class="orderId">
                                    @item.UserId
                                </td>
                                <td class="orderId">
                                    @item.DisplayName
                                </td>
                                <td>
                                    @item.FillTotalCount
                                </td>
                                <td class="ye">
                                    @item.TotalMoney.ToString("N2")
                                </td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="4">
                                暂时没有找到你要的数据哦
                            </td>
                        </tr>
                    }
                </table>
                <p class="tip" style="margin-top: 10px;">注意：充值排行最多可查询一个月数据</p>
                <div style="margin-top: -15px;">
                    @ViewHelpers.Pager6("getAgentFillMoney", ViewBag.pageNo, 10, list == null ? 0 : list.TotalCount)
                </div>
            </div>
        </div>
        </div>
    </div>
<script type="text/javascript">
    $(function () {
        $(".scheme-table tr:even:gt(0)").css("backgroundColor", "#f9f9f9");

    })
    function getAgentFillMoney(pageNo, pageSize) {
        var begin = $("#begin").val();
        var end = $("#end").val();
        var key = $("#txtKey").val();
        var search = "pageNo=" + pageNo + "&pageSize=" + pageSize + "&begin=" + begin + "&end=" + end + "&r=" + Math.random().toFixed(5);
        if (key != null) {
            search = search + "&key=" + key;
        }
        location.search = search;
    }   
</script>
<div class="clearfix">
</div>
