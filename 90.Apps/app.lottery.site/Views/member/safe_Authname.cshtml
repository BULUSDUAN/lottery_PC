@using app.lottery.site.Models;
@{
    ViewBag.Title = "安全首页 - 用户中心 - 体育彩票 | 福利彩票 | 中国体育彩票 - " + SiteString.getHZSiteName(Request);
    ViewBag.keywords = "安全首页, 用户中心, 体育彩票, 福利彩票, 中国体育彩票, " + SiteString.getHZSiteName(Request);
    CurrentUserInfo user = ViewBag.CurrentUser;
}
@section css{
    @ViewHelpers.css("mycenter.css")
}
@section js{
    @UserHelper.js("formValidator-4-1-3.js")
    @UserHelper.js("formValidatorRegex.js")
    @UserHelper.js("CheckPwd.js")
}
<div class="crumb">
    <ul>
        <li class="a">您当前的位置：</li>
        <li><a href="/">首页</a> > </li>
        <li>用户信息认证</li>
    </ul>
</div>
<div class="center mt10">
    <div class="new_buy_right">
        @{Html.RenderAction("toptip", "Member");}
        <div class="info_zl">
            用户信息认证</div>
        <div class="xgmm_main" style="margin-top: 0px;border: 1px solid #E5E5E5;width: 785px;">
            <input type="hidden"  id="hd_bind_realName" value="0"/>
            <input type="hidden"  id="hd_bind_mobile" value="0"/>
            <ul class="userinfo_list">
                <li><span class="sp120"><em class="red">*</em> 真实姓名：</span>
                <input type="text" name="realName" id="txt_realName" maxlength="16" size="33" class="login_input_1"   value="" />
                    <span class="ms_tip" id="error_realName"></span></li>
                <li><span class="sp120"><em class="red">*</em> 身份证号码：</span>
                <input type="text" id="idCardNumber"  name="idCardNumber" class="login_input_1" size="33" maxlength="18"    value="" />
                    <span class="ms_tip" id="error_idcard"></span></li>
                <li><span class="sp120"><em class="red">*</em> 手机号码：</span>
                <input id="mobileNumber"class="login_input_1" size="33" maxlength="11"    value="" />
                    <span class="ms_tip" id="error_mobileNumber"></span></li>
                    <li><span class="sp120"><em class="red">*</em> 验证码：</span>
                    <input id="checkCode" value="" class="login_input_1" size="15" maxlength="8" />
                        <input type="button" id="btn_authcode" class="btn_next" value="获取验证码">
                        <span class="ms_tip" id="error_checkcode"></span></li>
                    <li><span class="sp120">&nbsp;</span><input type="button" id="bt_sub_all" class="btn_submit"
                        value="提交" />
                    </li>
                    <li><span class="sp120">&nbsp;</span><span class="error-box" id="errbox"><i class="err-icon"></i>
                    <span class="msg" id="authRealNameERR"></span></span></li>
            </ul>
            <div class="tips magin_title">
                <i></i><b class="leftdesc">温馨提醒：</b> <span class="desc gray">1.为保障您的账户安全，请填写您的真实身份信息。<br />
                    2.暂不支持港澳台身份证，军官证，护照等相关证件进行实名认证。如果您没有中国大陆内地身份证，请咨询客服热线。<br />
                    3.为保证您的实名认证顺利进行，推荐使用IE8、IE6、360安全浏览器进行认证。<br />
                    4.如有任何疑问，请联系网站客服 </span>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        $(function () {
            $(".btn_submit").click(function () {
                var realName = $.trim($("#txt_realName").val());
                var idcard = $.trim($("#idCardNumber").val());
                var mobile = $.trim($("#mobileNumber").val());
                var mobileCode = $.trim($("#checkCode").val());
                msg = "";
                var reg = /^[\u4e00-\u9fa5·]+$/i;
                if (!mobileCode || !Tool.isNumber(mobileCode)) {
                    msg = "请输入正确的验证码";
                    $("#checkCode").focus();
                }
                if (!mobile || !Tool.isMobile(mobile)) {
                    msg = "请输入正确的号码";
                    $("#mobileNumber").focus();
                }
                if (!Tool.isCardNo(idcard)) {
                    msg = "请输入您的身份证号码";
                    $("#idCardNumber").focus();
                }
                if (!reg.test(realName)) {
                    msg = "请输入你真实的姓名";
                    $("#txt_realName").focus();
                }
                if (msg.length > 0) {
                    show(msg);
                    return;
                } else {
                    $.post("/member/AuthUser", { realName: realName, idCardNumber: idcard, mobileCode: mobileCode }, function (result) {
                        if (result.code) {
                            alertTip(result.Msg);
                            window.location.href = "/member/safe";
                        } else {
                            alertTip(result.Msg);
                        }
                    });
                }

            });
            $("#btn_authcode").click(function () {
                var mobile = $.trim($("#mobileNumber").val());
                msg = "";
                if (!mobile || !Tool.isMobile(mobile)) {
                    msg = "请输入正确的号码";
                    $("#mobileNumber").focus();
                }
                if (msg.length > 0) {
                    show(msg);
                    return;
                } else {
                    $.post("/member/authmobile_request", { mobile: mobile }, function (result) {
                        if (result.Succuss) {
                            alertTip(result.Msg);
                        }
                        else {
                            alertTip(result.Msg);
                        }
                    });
                }
            });
            function show(msg) {
                if (msg.length > 0) {
                    $("#errbox").show();
                    $("#authRealNameERR").text(msg);
                } else {
                    $("#authRealNameERR").text("");
                    $("#errbox").hide();
                }
            }
        })
            
    </script>
</div>
<div class="clearfix">
</div>


